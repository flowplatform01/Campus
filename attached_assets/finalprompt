SYSTEM MODE: FINAL PRODUCTION HARDENING
THIS IS VERSION 1 FINALIZATION.
NO REBUILDING.
NO ARCHITECTURAL RESTART.
NO BREAKING EXISTING WORK.

You must deeply analyze the entire codebase as it currently exists
(after Cursor improvements).

Your mission:

1. Perform a complete system audit.
2. Identify logical gaps.
3. Identify broken flows.
4. Identify missing academic functionality.
5. Improve weak areas intelligently.
6. Preserve uniqueness.
7. Make the app fully production-ready.

This is the final refinement before Version 1 release.

--------------------------------------------
PHASE 1 — FULL SYSTEM DEEP AUDIT
--------------------------------------------

Audit all modules:

• Authentication
• Progressive Onboarding
• Enrollment (Student / Parent / Employee)
• Academics
• Subjects
• Classes
• Timetable
• Attendance
• Assignments
• Exams
• Results
• Achievements
• Announcements
• Notifications
• Payments
• Parent Dashboard
• Student Dashboard
• Employee Dashboard
• Admin Dashboard
• Role & Sub-role permissions
• Multi-tenant isolation

You must:

• Identify any incomplete logic
• Identify any unsafe assumptions
• Identify any cross-tenant risks
• Identify any UI pretending success without DB persistence
• Identify any orphan data risks
• Identify any inconsistent lifecycle states

Fix only what is necessary.
Do not rebuild what is already correct.

--------------------------------------------
PHASE 2 — ACADEMICS FULL COMPLETION & VALIDATION
--------------------------------------------

Academics must behave like a real school system.

You must deeply inspect and ensure everthing is ok

--------------------------------------------
PHASE 3 — ROLE-BY-ROLE FULL FLOW SIMULATION
--------------------------------------------

Simulate complete real-life flows:

ADMIN FLOW
• Create school config
• Manage sub-roles
• Approve enrollment
• Assign classes
• Configure academics
• Create timetable
• Create announcements
• Monitor payments

PARENT FLOW
• Register
• Apply for child
• Track application
• View child dashboard
• Pay invoice
• View attendance
• View results

STUDENT FLOW
• Register or be approved
• Link to school
• Access timetable
• Submit assignment
• View attendance
• View exams
• View achievements

EMPLOYEE FLOW
• Register
• Apply to school
• Get approved
• Receive sub-role
• Access permitted dashboard only
• Create assignments (if teacher)
• Mark attendance (if authorized)

All flows must:
• Be fully functional
• Have no blocked states
• Have no logical dead ends
• Have no broken navigation

--------------------------------------------
PHASE 3 — SYSTEM INTEGRATION VALIDATION
--------------------------------------------

Ensure:

• Enrollment properly gates access
• Progressive onboarding stops when completed 
• Announcements trigger notifications
• Payments attach correctly
• Role permissions strictly enforced
• No privilege escalation
• No data leakage

--------------------------------------------
PHASE 4 — TYPESCRIPT & BACKEND INTEGRITY CHECK
--------------------------------------------

• Run full TypeScript strict validation
• Resolve any type mismatches
• Remove unused variables
• Fix unsafe null checks
• Ensure backend handlers validate input properly
• Ensure DB transactions are atomic where required

No warnings.
No critical errors.
No runtime risks.

--------------------------------------------
PHASE 5 — DATABASE & MIGRATIONS
--------------------------------------------

• Review schema
• Add missing columns if required
• Add missing relations if required
• Generate migrations properly
• Apply migrations safely
• Ensure no destructive migration

Verify:
• No broken foreign keys
• No orphan rows
• No nullable fields where unsafe

--------------------------------------------
PHASE 6 — BUILD & RUNTIME PREPARATION
--------------------------------------------

After all fixes:

1. Kill any process using the ports defined in .env
2. Ensure .env ports are respected
3. Start backend server
4. Start frontend server
5. Confirm API connectivity
6. Confirm correct port binding
7. Confirm CORS properly configured

--------------------------------------------
PHASE 7 — FINAL BUILD PROCESS
--------------------------------------------

Run:

• npm run build (frontend)
• Backend production build (if applicable)
• Ensure build success
• No compile failures
• No missing env variables

--------------------------------------------
PHASE 9 — PREVIEW & FINAL VALIDATION
--------------------------------------------

Preview localy:

• Backend separately
• Frontend separately

Test full integration:

• Login
• Enrollment
• Academic actions
• Payments
• Notifications
• Dashboard switching

Confirm:

• All systems communicate
• No console errors
• No server crashes
• No 500 errors
• No broken UI states

--------------------------------------------
FINAL REQUIREMENTS
--------------------------------------------

This is Version 1 stabilization.

You must:

• Improve where needed
• Not overbuild
• Not introduce unnecessary complexity
• Preserve app uniqueness
• Maintain multi-tenant isolation
• Ensure production-level stability

At the end, provide:

1. Summary of fixes
2. Improvements made
3. Areas strengthened
4. Confirmation of production readiness
5. Confirmation backend + frontend running correctly
6. Confirmation database migrations applied

This is the final hardening stage.
This determines Campus V1.
